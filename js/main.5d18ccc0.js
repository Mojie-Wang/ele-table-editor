(function(e){function t(t){for(var r,l,i=t[0],u=t[1],s=t[2],p=0,d=[];p<i.length;p++)l=i[p],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&d.push(a[l][0]),a[l]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={main:0},o=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var c=u;o.push(["e35a","chunk-vendors"]),n()})({"0719":function(e,t,n){t=e.exports=n("24fb")(!1),t.push([e.i,"body{background:#f0f2f5}",""])},"4c61":function(e,t,n){"use strict";var r=n("caac"),a=n.n(r);a.a},"5d7d":function(e,t,n){"use strict";var r=n("718e"),a=n.n(r);a.a},"718e":function(e,t,n){var r=n("996a");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("499e").default;a("5b84fbfe",r,!0,{sourceMap:!1,shadowMode:!1})},"996a":function(e,t,n){t=e.exports=n("24fb")(!1),t.push([e.i,".actions[data-v-bf7cc290]{margin-bottom:20px}.code-data[data-v-bf7cc290]{background:#f6f6f6;padding:20px}",""])},"9a96":function(e,t,n){var r=n("0719");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("499e").default;a("6dbd39b9",r,!0,{sourceMap:!1,shadowMode:!1})},a7e2:function(e,t,n){"use strict";var r=n("9a96"),a=n.n(r);a.a},c85d:function(e,t,n){t=e.exports=n("24fb")(!1),t.push([e.i,".ele-table-editor .el-form-item{margin-bottom:0;display:inline-block}.ele-table-editor-content{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ele-table-editor-btn{margin-bottom:20px}",""])},caac:function(e,t,n){var r=n("c85d");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("499e").default;a("3e50e0f2",r,!0,{sourceMap:!1,shadowMode:!1})},e35a:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticStyle:{margin:"50px 20px"},attrs:{header:"table-editor 示例"}},[n("div",{staticClass:"actions"},[n("el-button",{attrs:{type:"danger"},on:{click:e.handleCheck}},[e._v("校检数据")]),n("el-button",[n("el-link",{attrs:{href:"https://github.com/dream2023/ele-table-editor/blob/master/example/App.vue",underline:!1,target:"_blank"}},[e._v("查看示例源码")])],1),n("el-button",[n("el-link",{attrs:{href:"https://github.com/dream2023/ele-table-editor",underline:!1,target:"_blank"}},[e._v("进入 GitHub")])],1)],1),n("ele-table-editor",{ref:"table",attrs:{extraBtns:e.extraBtns,rules:e.rules,columns:e.columns,newColumnValue:e.newColumnValue},scopedSlots:e._u([{key:"sex",fn:function(t){var r=t.data;return[n("el-radio-group",{model:{value:r.sex,callback:function(t){e.$set(r,"sex",t)},expression:"data.sex"}},[n("el-radio",{attrs:{label:"1"}},[e._v("男")]),n("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)]}}]),model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),n("pre",{staticClass:"code-data"},[e._v(e._s(e.tableData)+"\n")])],1)},o=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._t("default",[e.isShowAdd?n("div",{staticClass:"ele-table-editor-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(e._s(e.addBtnText))])],1):e._e()]),n("el-table",e._g(e._b({staticClass:"ele-table-editor",attrs:{data:e.value}},"el-table",e.tableAttrs,!1),e.tableOn),[e._l(e.computedColumns,(function(t,r){return[t.isShowSlot?n("el-table-column",e._b({key:r,scopedSlots:e._u([{key:"default",fn:function(r){return[e._t(t.prop,[t.content?[e._l(t.content,(function(a,o){return["string"===typeof a?n("span",{key:o},[e._v(e._s(a))]):n("el-tooltip",{key:o,staticClass:"el-form-item",class:{"is-error":e.isError(r.$index,a.valueKey,t.prop)},attrs:{effect:"dark",disabled:!e.isError(r.$index,a.valueKey,t.prop),content:e.isError(r.$index,a.valueKey,t.prop),placement:"top"}},[n(a.type,e._g(e._b({tag:"component",class:a.class,style:a.style,on:{input:function(n){return e.handleChange(a.valueKey||t.prop,r.$index,n)}},scopedSlots:e._u([a.options&&e.optionTypes[a.type]?{key:"default",fn:function(){return e._l(a.options,(function(t,r){return n("option-slot",{key:r,attrs:{data:t,prop:a.prop,optionAttrs:t.attrs,optionType:e.optionTypes[a.type].type,optionText:e.optionTypes[a.type].text,optionValue:e.optionTypes[a.type].value}})}))},proxy:!0}:null,e._l(a.slots,(function(e,t){return{key:t,fn:function(){return[n("extend-slot",{key:t,attrs:{render:e}})]},proxy:!0}}))],null,!0),model:{value:r.row[a.valueKey||t.prop],callback:function(n){e.$set(r.row,a.valueKey||t.prop,n)},expression:"scope.row[contentItem.valueKey || item.prop]"}},"component",e.getAttrs(a),!1),a.on))],1)]}))]:[t.prop?[e._v(e._s(e.getContentText(r,t)))]:e._e()]],{data:e.value[r.$index],row:r.row,disabled:e.disabled,index:r.$index})]}}],null,!0)},"el-table-column",t,!1)):n("el-table-column",e._b({key:r},"el-table-column",t,!1))]})),e.isShowActionColumn?n("el-table-column",{attrs:{"header-align":"center",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("btn",[e._l(e.extraBtns,(function(r,a){return n("el-button",e._b({key:a,on:{click:function(e){return r.click(t)}}},"el-button",r.attrs,!1),[e._v(e._s(r.text))])})),e.isShowDelete?n("el-button",e._b({on:{click:function(n){return e.handleDelete(t.$index)}}},"el-button",e.deleteBtnAttr,!1),[e._v("删除")]):e._e()],null,t)]}}],null,!0)}):e._e()],2)],2)},i=[],u=(n("caad"),n("d81d"),n("a434"),n("4160"),n("a15b"),n("b64b"),n("d3b7"),n("159b"),n("2fa7")),s=(n("96cf"),n("89ba")),c=n("2a95"),p={data:function(){return{errorList:{}}},methods:{validate:function(){if(this.validateAllValue(),!this.rules||!this.value.length)return Promise.resolve();var e={data:{type:"array",fields:this.rules}};return new c["a"](e).validate({data:this.value})},validateAllValue:function(){var e=this,t=Object.keys(this.rules||{});this.value.forEach((function(n,r){t.forEach(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateOneValue(a,r,n[a]);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}))},validateOneValue:function(e,t,n){var r=this;return new Promise(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.checkValue(e,n);case 3:r.handleCheckSuccess(e,t),o(!0),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),r.handleCheckError(e,t,a.t0),o(!1);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}())},checkValue:function(e,t){var n=this;return new Promise((function(r,a){if(n.rules&&n.rules[e]){var o=new c["a"](Object(u["a"])({},e,n.rules[e]));o.validate(Object(u["a"])({},e,t),(function(e,t){e?a(e,t):r()}))}else r()}))},handleCheckSuccess:function(e,t){this.errorList[t]&&this.errorList[t][e]&&(this.errorList[t][e]=null)},handleCheckError:function(e,t,n){this.errorList[t]||this.$set(this.errorList,t,{}),this.$set(this.errorList[t],e,n.map((function(e){return e.message})).join(","))},isError:function(e,t,n){return this.errorList&&this.errorList[e]&&this.errorList[e][t||n]}}},d={name:"ExtendSlot",functional:!0,props:{render:Function,data:Object},render:function(e,t){return t.props.render(e,t.props.data)}},f={name:"OptionSlot",props:{optionType:{type:String,required:!0},optionText:{type:String,required:!0},optionValue:{type:String,required:!0},optionAttrs:Object,data:{type:[Object,String],required:!0},prop:{type:Object,default:function(){return{text:"text",value:"value"}}}},render:function(e){var t=this.changeToObject(this.data);t=this.changeProp(t,this.prop);var n=this.getOptionConfig(this.optionAttrs,this.optionText,this.optionValue,t);return e(this.optionType,n.attrs,n.children)},methods:{getOptionConfig:function(e,t,n,r){var a=Object.assign({},e,Object(u["a"])({},n,r["value"])),o=null;return"content"===t?o=r["text"]:a[t]=r["text"],{attrs:{attrs:a},children:o}},changeToObject:function(e){return"string"===typeof e?{text:e,value:e}:e},changeProp:function(e,t){return t?{text:e[t.text],value:e[t.value]}:e}}},b={name:"EleTableEditor",mixins:[p],components:{ExtendSlot:d,OptionSlot:f},props:{tableAttrs:{type:Object,default:function(){return{border:!0}}},tableOn:{type:Object},value:{type:Array,required:!0,default:function(){return[]}},isShowDelete:{type:Boolean,default:!0},deleteBtnAttr:{type:Object,default:function(){return{type:"text"}}},extraBtns:{type:Array,default:null},columns:{type:Array,required:!0,default:function(){return[]}},rules:Object,disabled:{type:Boolean,default:!1},newColumnValue:{type:Object,default:function(){return{}}},isShowAdd:{type:Boolean,default:!0},addBtnText:{type:String,default:"新增"}},computed:{computedColumns:function(){var e=this;return this.columns.map((function(t){return t.isShowSlot=e.isShowSlot(t),t.content&&(t.content=e.changeToArray(t.content)),t}))},isShowActionColumn:function(){return this.isShowDelete||this.extraBtns}},data:function(){return{optionTypes:{"el-select":{type:"el-option",text:"label",value:"value"},"el-checkbox-group":{type:"el-checkbox",text:"content",value:"label"},"el-radio-group":{type:"el-radio",text:"content",value:"label"}}}},methods:{isShowSlot:function(e){return!e.type||!["index","selection"].includes(e.type)},handleDelete:function(e){var t=this.value;t.splice(e,1),this.$emit("input",t)},handleAdd:function(){this.value.push(Object.assign({},this.newColumnValue)),this.$emit("input",this.value)},handleChange:function(e,t,n){this.validateOneValue(e,t,n)},changeToArray:function(e){return Array.isArray(e)?e:[e]},getAttrs:function(e){return Object.assign({},{disabled:this.disabled},e)},getContentText:function(e,t){var n=e.row[t.prop];return t.options&&t.options[n]&&(n=t.options[n]),t.formatter&&(n=t.formatter(e.row,e.column)),n}}},h=b,y=(n("4c61"),n("2877")),v=Object(y["a"])(h,l,i,!1,null,null,null),m=v.exports,x={name:"App",components:{EleTableEditor:m},data:function(){return{tableData:[{grade:"三年级二班",name:"小张",sex:"男",tuition:2e3,unPay:100,status:0,dream:""}],newColumnValue:{grade:"三年级二班",status:1},rules:{name:[{required:!0,message:"姓名必填"}],tuition:{required:!0,message:"已缴纳金额必填"}},extraBtns:[{text:"关联",attrs:{type:"text"},click:function(e){console.log(e)}}],columns:[{type:"index"},{prop:"grade",label:"年级"},{prop:"name",label:"姓名",content:{type:"el-input",attrs:{placeholder:"学员姓名"}}},{prop:"sex",label:"性别"},{label:"缴费",width:400,content:["已缴纳: ",{type:"el-input",valueKey:"tuition",style:{width:"100px",marginRight:"10px"}},"未缴纳: ",{type:"el-input",valueKey:"unPay",style:{width:"100px"}}]},{prop:"dream",label:"梦想",content:{type:"el-radio-group",options:[{text:"科学家",value:"scientist"},{text:"警察",value:"policeman"},"程序员"]}},{prop:"birthplace",label:"籍贯",content:{type:"el-select",options:[{name:"北京",id:"beijing"},{name:"上海",id:"shanghai"},{name:"广州",id:"guangzhou"}],prop:{text:"name",value:"id"}}},{prop:"status",label:"状态",options:{0:"禁用",1:"正常",2:"异常"}}]}},methods:{handleCheck:function(){this.$refs["table"].validate().catch((function(e){var t=e.errors,n=e.fields;console.log(t,n)}))}}},g=x,w=(n("a7e2"),n("5d7d"),Object(y["a"])(g,a,o,!1,null,"bf7cc290",null)),_=w.exports,k=n("5c96"),O=n.n(k);n("0fae");r["default"].config.productionTip=!1,r["default"].use(O.a),new r["default"]({render:function(e){return e(_)}}).$mount("#app")}});
//# sourceMappingURL=main.5d18ccc0.js.map