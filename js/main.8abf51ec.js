(function(e){function t(t){for(var r,l,i=t[0],s=t[1],u=t[2],d=0,p=[];d<i.length;d++)l=i[d],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&p.push(a[l][0]),a[l]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);c&&c(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={main:0},o=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=s;o.push(["e35a","chunk-vendors"]),n()})({"0719":function(e,t,n){t=e.exports=n("24fb")(!1),t.push([e.i,"body{background:#f0f2f5}",""])},1817:function(e,t,n){var r=n("7260");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("499e").default;a("7f45cd3e",r,!0,{sourceMap:!1,shadowMode:!1})},3739:function(e,t,n){"use strict";var r=n("1817"),a=n.n(r);a.a},"4c61":function(e,t,n){"use strict";var r=n("caac"),a=n.n(r);a.a},7260:function(e,t,n){t=e.exports=n("24fb")(!1),t.push([e.i,".actions[data-v-0e495262]{margin-bottom:20px}.code-data[data-v-0e495262]{background:#f6f6f6;padding:20px}",""])},"9a96":function(e,t,n){var r=n("0719");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("499e").default;a("6dbd39b9",r,!0,{sourceMap:!1,shadowMode:!1})},a7e2:function(e,t,n){"use strict";var r=n("9a96"),a=n.n(r);a.a},c85d:function(e,t,n){t=e.exports=n("24fb")(!1),t.push([e.i,".ele-table-editor .el-form-item{margin-bottom:0;display:inline-block}.ele-table-editor-content{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},caac:function(e,t,n){var r=n("c85d");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("499e").default;a("3e50e0f2",r,!0,{sourceMap:!1,shadowMode:!1})},e35a:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticStyle:{margin:"50px 20px"},attrs:{header:"table-editor 示例"}},[n("div",{staticClass:"actions"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("点我新增")]),n("el-button",{attrs:{type:"danger"},on:{click:e.handleCheck}},[e._v("校检数据")]),n("el-button",[n("el-link",{attrs:{href:"https://github.com/dream2023/ele-table-editor/blob/master/example/App.vue",underline:!1,target:"_blank"}},[e._v("查看示例源码")])],1),n("el-button",[n("el-link",{attrs:{href:"https://github.com/dream2023/ele-table-editor",underline:!1,target:"_blank"}},[e._v("进入 GitHub")])],1)],1),n("ele-table-editor",{ref:"table",attrs:{extraBtns:e.extraBtns,rules:e.rules,columns:e.columns},scopedSlots:e._u([{key:"sex",fn:function(t){var r=t.data;return[n("el-radio-group",{model:{value:r.sex,callback:function(t){e.$set(r,"sex",t)},expression:"data.sex"}},[n("el-radio",{attrs:{label:"1"}},[e._v("男")]),n("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)]}}]),model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),n("pre",{staticClass:"code-data"},[e._v(e._s(e.tableData)+"\n")])],1)},o=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",e._g(e._b({staticClass:"ele-table-editor",attrs:{data:e.value}},"el-table",e.tableAttrs,!1),e.tableOn),[e._l(e.computedColumns,(function(t,r){return[t.isShowSlot?n("el-table-column",e._b({key:r,scopedSlots:e._u([{key:"default",fn:function(r){return[e._t(t.attrs.prop,[t.content?[e._l(t.content,(function(a,o){return["string"===typeof a?n("span",{key:o},[e._v(e._s(a))]):n(e.isError(r.$index,a.valueKey,t.attrs.prop)?"el-popover":"div",{key:o,tag:"component",staticClass:"el-form-item",class:{"is-error":e.isError(r.$index,a.valueKey,t.attrs.prop)},attrs:{title:"错误提示",content:e.isError(r.$index,a.valueKey,t.attrs.prop)}},[n(a.type,e._g(e._b({tag:"component",class:a.class,style:a.style,attrs:{slot:"reference"},on:{input:function(n){return e.handleChange(a.valueKey||t.attrs.prop,r.$index,n)}},slot:"reference",scopedSlots:e._u([e._l(a.slots,(function(e,t){return{key:t,fn:function(){return[n("extend-slot",{key:t,attrs:{render:e}})]},proxy:!0}}))],null,!0),model:{value:r.row[a.valueKey||t.attrs.prop],callback:function(n){e.$set(r.row,a.valueKey||t.attrs.prop,n)},expression:"scope.row[contentItem.valueKey || item.attrs.prop]"}},"component",e.getAttrs(a.attrs),!1),a.on))],1)]}))]:[t.attrs&&t.attrs.prop?[e._v(e._s(r.row[t.attrs.prop]))]:e._e()]],{data:e.value[r.$index],row:r.row,index:r.$index})]}}],null,!0)},"el-table-column",t.attrs,!1)):n("el-table-column",e._b({key:r},"el-table-column",t.attrs,!1))]})),e.isShowActionColumn?n("el-table-column",{attrs:{"header-align":"center",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(e.extraBtns,(function(r,a){return n("el-button",e._b({key:a,on:{click:function(e){return r.click(t)}}},"el-button",r.attrs,!1),[e._v(e._s(r.text))])})),n("el-button",e._b({on:{click:function(n){return e.handleDelete(t.$index)}}},"el-button",e.deleteBtnAttr,!1),[e._v("删除")])]}}],null,!1,4072982809)}):e._e()],2)},i=[],s=(n("caad"),n("d81d"),n("a434"),n("4160"),n("a15b"),n("b64b"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2fa7")),u=(n("96cf"),n("89ba")),c=n("2a95"),d={data:function(){return{errorList:{}}},methods:{validate:function(){var e=this;if(this.validateAllValue(),!this.rules||!this.value.length)return Promise.resolve();var t=this.value.map((function(t){return new Promise((function(n,r){var a=new c["a"](e.rules);a.validate(t,(function(e){e?r(e):n()}))}))}));return new Promise((function(e,n){Promise.all(t).then((function(t){e()})).catch((function(e){n(e)}))}))},validateAllValue:function(){var e=this,t=Object.keys(this.rules||{});this.value.forEach((function(n,r){t.forEach(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(a,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateOneValue(a,r,n[a]);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}))},validateOneValue:function(e,t,n){var r=this;return new Promise(function(){var a=Object(u["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.checkValue(e,n);case 3:r.handleCheckSuccess(e,t),o(!0),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),r.handleCheckError(e,t,a.t0),o(!1);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}())},checkValue:function(e,t){var n=this;return new Promise((function(r,a){if(n.rules&&n.rules[e]){var o=new c["a"](Object(s["a"])({},e,n.rules[e]));o.validate(Object(s["a"])({},e,t),(function(e,t){e?a(e):r()}))}else r()}))},handleCheckSuccess:function(e,t){this.errorList[t]&&this.errorList[t][e]&&(this.errorList[t][e]=null)},handleCheckError:function(e,t,n){this.errorList[t]||this.$set(this.errorList,t,{}),this.$set(this.errorList[t],e,n.map((function(e){return e.message})).join(","))},isError:function(e,t,n){return this.errorList&&this.errorList[e]&&this.errorList[e][t||n]}}},p={name:"ExtendSlot",functional:!0,props:{render:Function,data:Object},render:function(e,t){return t.props.render(e,t.props.data)}},f={name:"EleTableEditor",mixins:[d],components:{ExtendSlot:p},props:{tableAttrs:{type:Object,default:function(){return{border:!0}}},tableOn:{type:Object},value:{type:Array,default:function(){return[]}},isShowDelete:{type:Boolean,default:!0},deleteBtnAttr:{type:Object,default:function(){return{type:"text"}}},extraBtns:{type:Array,default:null},columns:{type:Array,default:function(){return[]}},rules:Object,disabled:{type:Boolean,default:!1}},computed:{computedColumns:function(){var e=this,t=this.columns;return t.map((function(t){return t.isShowSlot=e.isShowSlot(t),t.content&&(t.content=e.changeToArray(t.content)),t}))},isShowActionColumn:function(){return this.isShowDelete||this.extraBtns}},methods:{isShowSlot:function(e){return!e.attrs||!e.attrs.type||!["index","selection"].includes(e.attrs.type)},handleDelete:function(e){var t=this.value;t.splice(e,1),this.$emit("input",t)},handleChange:function(e,t,n){this.validateOneValue(e,t,n)},changeToArray:function(e){return Array.isArray(e)?e:[e]},getAttrs:function(e){return Object.assign({},{disabled:this.disabled},e)}}},b=f,h=(n("4c61"),n("2877")),v=Object(h["a"])(b,l,i,!1,null,null,null),m=v.exports,y={name:"App",components:{EleTableEditor:m},data:function(){return{tableData:[{grade:"三年级二班",name:"小张",sex:"男",tuition:2e3,unPay:100}],rules:{name:{required:!0,message:"姓名必填"},tuition:{required:!0,message:"已缴纳金额必填"}},extraBtns:[{text:"关联",attrs:{type:"text"},click:function(e){console.log(e)}}],columns:[{attrs:{type:"index"}},{attrs:{prop:"grade",label:"年级"}},{attrs:{prop:"name",label:"姓名"},content:{type:"el-input",attrs:{placeholder:"学员姓名"}}},{attrs:{prop:"sex",label:"性别"}},{attrs:{label:"缴费",width:400},content:["已缴纳: ",{type:"el-input",valueKey:"tuition",style:{width:"100px",marginRight:"10px"}},"未缴纳: ",{type:"el-input",valueKey:"unPay",style:{width:"100px"}}]}]}},methods:{handleAdd:function(){this.tableData.push({grade:"三年级二班"})},handleCheck:function(){this.$refs["table"].validate((function(e){console.log(e)}))}}},x=y,g=(n("a7e2"),n("3739"),Object(h["a"])(x,a,o,!1,null,"0e495262",null)),_=g.exports,w=n("5c96"),k=n.n(w);n("0fae");r["default"].config.productionTip=!1,r["default"].use(k.a),new r["default"]({render:function(e){return e(_)}}).$mount("#app")}});
//# sourceMappingURL=main.8abf51ec.js.map